"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/hooks/useOrderbook.js":
/*!***********************************!*\
  !*** ./app/hooks/useOrderbook.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useOrderbook: () => (/* binding */ useOrderbook)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_venueConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/venueConfig */ \"(app-pages-browser)/./app/lib/venueConfig.js\");\n/*\r\n================================================================================\r\n| FILE: app/hooks/useOrderbook.js (Improved Logic)                             |\r\n================================================================================\r\n*/ /* __next_internal_client_entry_do_not_use__ useOrderbook auto */ var _s = $RefreshSig$();\n\n\nconst useOrderbook = (venue, symbol)=>{\n    _s();\n    const [bids, setBids] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [asks, setAsks] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [lastUpdate, setLastUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const ws = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const dataTimeout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useOrderbook.useEffect\": ()=>{\n            if (!_lib_venueConfig__WEBPACK_IMPORTED_MODULE_1__.VENUE_CONFIG) {\n                return;\n            }\n            setIsLoading(true);\n            setError(null);\n            setBids([]);\n            setAsks([]);\n            if (ws.current) {\n                ws.current.close();\n            }\n            if (dataTimeout.current) {\n                clearTimeout(dataTimeout.current);\n            }\n            const config = _lib_venueConfig__WEBPACK_IMPORTED_MODULE_1__.VENUE_CONFIG[venue];\n            if (!config) {\n                setError(\"Invalid venue configuration: \".concat(venue));\n                setIsLoading(false);\n                return;\n            }\n            const formattedSymbol = config.symbolFormat(symbol);\n            ws.current = new WebSocket(config.wsUrl);\n            const localBids = new Map();\n            const localAsks = new Map();\n            ws.current.onopen = ({\n                \"useOrderbook.useEffect\": ()=>{\n                    console.log(\"[\".concat(venue, \"] WebSocket Connected. Subscribing to \").concat(formattedSymbol, \"...\"));\n                    ws.current.send(JSON.stringify(config.getSubscribeMsg(formattedSymbol)));\n                    dataTimeout.current = setTimeout({\n                        \"useOrderbook.useEffect\": ()=>{\n                            if (bids.length === 0 && asks.length === 0) {\n                                setError(\"Connection timed out. No order book data received from \".concat(venue, \" for \").concat(formattedSymbol, \". The symbol may be incorrect or the API may have changed.\"));\n                                setIsLoading(false);\n                            }\n                        }\n                    }[\"useOrderbook.useEffect\"], 10000);\n                }\n            })[\"useOrderbook.useEffect\"];\n            ws.current.onmessage = ({\n                \"useOrderbook.useEffect\": (event)=>{\n                    console.log(\"[\".concat(venue, \" RAW DATA]:\"), event.data);\n                    const data = JSON.parse(event.data);\n                    // UPDATED: More robust check for success/info messages\n                    if (data.success === true || data.event && [\n                        \"subscribe\",\n                        \"info\"\n                    ].includes(data.event) || data.result) {\n                        console.log(\"[\".concat(venue, \"] Received subscription confirmation or info message.\"));\n                        return;\n                    }\n                    if (data.method === 'heartbeat') {\n                        if (data.method === 'test') {\n                            ws.current.send(JSON.stringify({\n                                jsonrpc: '2.0',\n                                method: 'public/test',\n                                params: {}\n                            }));\n                        }\n                        return;\n                    }\n                    const newOrders = config.processMessage(data);\n                    if (newOrders) {\n                        if (dataTimeout.current) {\n                            clearTimeout(dataTimeout.current);\n                            dataTimeout.current = null;\n                        }\n                        if (newOrders.isSnapshot) {\n                            localBids.clear();\n                            localAsks.clear();\n                        }\n                        const updateOrderBook = {\n                            \"useOrderbook.useEffect.updateOrderBook\": (currentBook, updates)=>{\n                                updates.forEach({\n                                    \"useOrderbook.useEffect.updateOrderBook\": (param)=>{\n                                        let [price, size] = param;\n                                        const priceNum = parseFloat(price);\n                                        const sizeNum = parseFloat(size);\n                                        if (sizeNum === 0) {\n                                            currentBook.delete(priceNum);\n                                        } else {\n                                            currentBook.set(priceNum, sizeNum);\n                                        }\n                                    }\n                                }[\"useOrderbook.useEffect.updateOrderBook\"]);\n                            }\n                        }[\"useOrderbook.useEffect.updateOrderBook\"];\n                        updateOrderBook(localBids, newOrders.bids || []);\n                        updateOrderBook(localAsks, newOrders.asks || []);\n                        const sortedBids = Array.from(localBids.entries()).sort({\n                            \"useOrderbook.useEffect.sortedBids\": (a, b)=>b[0] - a[0]\n                        }[\"useOrderbook.useEffect.sortedBids\"]);\n                        const sortedAsks = Array.from(localAsks.entries()).sort({\n                            \"useOrderbook.useEffect.sortedAsks\": (a, b)=>a[0] - b[0]\n                        }[\"useOrderbook.useEffect.sortedAsks\"]);\n                        setBids(sortedBids);\n                        setAsks(sortedAsks);\n                        setLastUpdate(new Date());\n                        if (isLoading) setIsLoading(false);\n                    }\n                }\n            })[\"useOrderbook.useEffect\"];\n            ws.current.onerror = ({\n                \"useOrderbook.useEffect\": (err)=>{\n                    console.error(\"[\".concat(venue, \"] WebSocket Error:\"), err);\n                    setError(\"Failed to connect to \".concat(venue, \". Check the browser console for details.\"));\n                    setIsLoading(false);\n                    if (dataTimeout.current) clearTimeout(dataTimeout.current);\n                }\n            })[\"useOrderbook.useEffect\"];\n            ws.current.onclose = ({\n                \"useOrderbook.useEffect\": ()=>{\n                    console.log(\"[\".concat(venue, \"] WebSocket Disconnected\"));\n                    if (dataTimeout.current) clearTimeout(dataTimeout.current);\n                }\n            })[\"useOrderbook.useEffect\"];\n            return ({\n                \"useOrderbook.useEffect\": ()=>{\n                    if (ws.current) {\n                        ws.current.close();\n                    }\n                    if (dataTimeout.current) {\n                        clearTimeout(dataTimeout.current);\n                    }\n                }\n            })[\"useOrderbook.useEffect\"];\n        }\n    }[\"useOrderbook.useEffect\"], [\n        venue,\n        symbol\n    ]);\n    return {\n        bids,\n        asks,\n        isLoading,\n        error,\n        lastUpdate\n    };\n};\n_s(useOrderbook, \"zutMs+Xy16YYFjatVz7+DFRWuhY=\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9ob29rcy91c2VPcmRlcmJvb2suanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOzs7O0FBSUE7QUFFb0Q7QUFDRjtBQUUzQyxNQUFNSSxlQUFlLENBQUNDLE9BQU9DOztJQUNoQyxNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR1IsK0NBQVFBLENBQUMsRUFBRTtJQUNuQyxNQUFNLENBQUNTLE1BQU1DLFFBQVEsR0FBR1YsK0NBQVFBLENBQUMsRUFBRTtJQUNuQyxNQUFNLENBQUNXLFdBQVdDLGFBQWEsR0FBR1osK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDYSxPQUFPQyxTQUFTLEdBQUdkLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU0sQ0FBQ2UsWUFBWUMsY0FBYyxHQUFHaEIsK0NBQVFBLENBQUM7SUFDN0MsTUFBTWlCLEtBQUtmLDZDQUFNQSxDQUFDO0lBQ2xCLE1BQU1nQixjQUFjaEIsNkNBQU1BLENBQUM7SUFFM0JELGdEQUFTQTtrQ0FBQztZQUNOLElBQUksQ0FBQ0UsMERBQVlBLEVBQUU7Z0JBQ2Y7WUFDSjtZQUVBUyxhQUFhO1lBQ2JFLFNBQVM7WUFDVE4sUUFBUSxFQUFFO1lBQ1ZFLFFBQVEsRUFBRTtZQUNWLElBQUlPLEdBQUdFLE9BQU8sRUFBRTtnQkFDWkYsR0FBR0UsT0FBTyxDQUFDQyxLQUFLO1lBQ3BCO1lBQ0EsSUFBSUYsWUFBWUMsT0FBTyxFQUFFO2dCQUNyQkUsYUFBYUgsWUFBWUMsT0FBTztZQUNwQztZQUVBLE1BQU1HLFNBQVNuQiwwREFBWSxDQUFDRSxNQUFNO1lBQ2xDLElBQUksQ0FBQ2lCLFFBQVE7Z0JBQ1RSLFNBQVMsZ0NBQXNDLE9BQU5UO2dCQUN6Q08sYUFBYTtnQkFDYjtZQUNKO1lBQ0EsTUFBTVcsa0JBQWtCRCxPQUFPRSxZQUFZLENBQUNsQjtZQUU1Q1csR0FBR0UsT0FBTyxHQUFHLElBQUlNLFVBQVVILE9BQU9JLEtBQUs7WUFFdkMsTUFBTUMsWUFBWSxJQUFJQztZQUN0QixN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T0FBTzswQ0FBRyxDQUFDQztvQkFDbEIzQyxRQUFRbEIsS0FBSyxDQUFDLElBQVUsT0FBTlIsT0FBTSx1QkFBcUJxRTtvQkFDN0M1RCxTQUFTLHdCQUE4QixPQUFOVCxPQUFNO29CQUN2Q08sYUFBYTtvQkFDYixJQUFJTSxZQUFZQyxPQUFPLEVBQUVFLGFBQWFILFlBQVlDLE9BQU87Z0JBQzdEOztZQUVBRixHQUFHRSxPQUFPLENBQUN3RCxPQUFPOzBDQUFHO29CQUNqQjVDLFFBQVFDLEdBQUcsQ0FBQyxJQUFVLE9BQU4zQixPQUFNO29CQUN0QixJQUFJYSxZQUFZQyxPQUFPLEVBQUVFLGFBQWFILFlBQVlDLE9BQU87Z0JBQzdEOztZQUVBOzBDQUFPO29CQUNILElBQUlGLEdBQUdFLE9BQU8sRUFBRTt3QkFDWkYsR0FBR0UsT0FBTyxDQUFDQyxLQUFLO29CQUNwQjtvQkFDQSxJQUFJRixZQUFZQyxPQUFPLEVBQUU7d0JBQ3JCRSxhQUFhSCxZQUFZQyxPQUFPO29CQUNwQztnQkFDSjs7UUFDSjtpQ0FBRztRQUFDZDtRQUFPQztLQUFPO0lBRWxCLE9BQU87UUFBRUM7UUFBTUU7UUFBTUU7UUFBV0U7UUFBT0U7SUFBVztBQUN0RCxFQUFFO0dBaElXWCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxERUxMXFxnb3F1YW50LW9yZGVyYm9vay1hcHBcXGFwcFxcaG9va3NcXHVzZU9yZGVyYm9vay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLypcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxufCBGSUxFOiBhcHAvaG9va3MvdXNlT3JkZXJib29rLmpzIChJbXByb3ZlZCBMb2dpYykgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuKi9cclxuJ3VzZSBjbGllbnQnO1xyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFZFTlVFX0NPTkZJRyB9IGZyb20gJy4uL2xpYi92ZW51ZUNvbmZpZyc7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlT3JkZXJib29rID0gKHZlbnVlLCBzeW1ib2wpID0+IHtcclxuICAgIGNvbnN0IFtiaWRzLCBzZXRCaWRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFthc2tzLCBzZXRBc2tzXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICBjb25zdCBbbGFzdFVwZGF0ZSwgc2V0TGFzdFVwZGF0ZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuICAgIGNvbnN0IHdzID0gdXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3QgZGF0YVRpbWVvdXQgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIVZFTlVFX0NPTkZJRykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgICAgc2V0QmlkcyhbXSk7XHJcbiAgICAgICAgc2V0QXNrcyhbXSk7XHJcbiAgICAgICAgaWYgKHdzLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgd3MuY3VycmVudC5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YVRpbWVvdXQuY3VycmVudCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YVRpbWVvdXQuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IFZFTlVFX0NPTkZJR1t2ZW51ZV07XHJcbiAgICAgICAgaWYgKCFjb25maWcpIHtcclxuICAgICAgICAgICAgc2V0RXJyb3IoYEludmFsaWQgdmVudWUgY29uZmlndXJhdGlvbjogJHt2ZW51ZX1gKTtcclxuICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRTeW1ib2wgPSBjb25maWcuc3ltYm9sRm9ybWF0KHN5bWJvbCk7XHJcblxyXG4gICAgICAgIHdzLmN1cnJlbnQgPSBuZXcgV2ViU29ja2V0KGNvbmZpZy53c1VybCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbG9jYWxCaWRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsQXNrcyA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgd3MuY3VycmVudC5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt2ZW51ZX1dIFdlYlNvY2tldCBDb25uZWN0ZWQuIFN1YnNjcmliaW5nIHRvICR7Zm9ybWF0dGVkU3ltYm9sfS4uLmApO1xyXG4gICAgICAgICAgICB3cy5jdXJyZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmdldFN1YnNjcmliZU1zZyhmb3JtYXR0ZWRTeW1ib2wpKSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhVGltZW91dC5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmlkcy5sZW5ndGggPT09IDAgJiYgYXNrcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcihgQ29ubmVjdGlvbiB0aW1lZCBvdXQuIE5vIG9yZGVyIGJvb2sgZGF0YSByZWNlaXZlZCBmcm9tICR7dmVudWV9IGZvciAke2Zvcm1hdHRlZFN5bWJvbH0uIFRoZSBzeW1ib2wgbWF5IGJlIGluY29ycmVjdCBvciB0aGUgQVBJIG1heSBoYXZlIGNoYW5nZWQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTAwMDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdzLmN1cnJlbnQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt2ZW51ZX0gUkFXIERBVEFdOmAsIGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVQREFURUQ6IE1vcmUgcm9idXN0IGNoZWNrIGZvciBzdWNjZXNzL2luZm8gbWVzc2FnZXNcclxuICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcyA9PT0gdHJ1ZSB8fCAoZGF0YS5ldmVudCAmJiBbXCJzdWJzY3JpYmVcIiwgXCJpbmZvXCJdLmluY2x1ZGVzKGRhdGEuZXZlbnQpKSB8fCBkYXRhLnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFske3ZlbnVlfV0gUmVjZWl2ZWQgc3Vic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiBvciBpbmZvIG1lc3NhZ2UuYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLm1ldGhvZCA9PT0gJ2hlYXJ0YmVhdCcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLm1ldGhvZCA9PT0gJ3Rlc3QnKSB7IC8vIEZvciBEZXJpYml0XHJcbiAgICAgICAgICAgICAgICAgICAgd3MuY3VycmVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsganNvbnJwYzogJzIuMCcsIG1ldGhvZDogJ3B1YmxpYy90ZXN0JywgcGFyYW1zOiB7fSB9KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld09yZGVycyA9IGNvbmZpZy5wcm9jZXNzTWVzc2FnZShkYXRhKTtcclxuICAgICAgICAgICAgaWYgKG5ld09yZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFUaW1lb3V0LmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YVRpbWVvdXQuY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVRpbWVvdXQuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld09yZGVycy5pc1NuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxCaWRzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxBc2tzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlT3JkZXJCb29rID0gKGN1cnJlbnRCb29rLCB1cGRhdGVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlcy5mb3JFYWNoKChbcHJpY2UsIHNpemVdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlTnVtID0gcGFyc2VGbG9hdChwcmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpemVOdW0gPSBwYXJzZUZsb2F0KHNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZU51bSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJvb2suZGVsZXRlKHByaWNlTnVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCb29rLnNldChwcmljZU51bSwgc2l6ZU51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdXBkYXRlT3JkZXJCb29rKGxvY2FsQmlkcywgbmV3T3JkZXJzLmJpZHMgfHwgW10pO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlT3JkZXJCb29rKGxvY2FsQXNrcywgbmV3T3JkZXJzLmFza3MgfHwgW10pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZEJpZHMgPSBBcnJheS5mcm9tKGxvY2FsQmlkcy5lbnRyaWVzKCkpLnNvcnQoKGEsIGIpID0+IGJbMF0gLSBhWzBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZEFza3MgPSBBcnJheS5mcm9tKGxvY2FsQXNrcy5lbnRyaWVzKCkpLnNvcnQoKGEsIGIpID0+IGFbMF0gLSBiWzBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRCaWRzKHNvcnRlZEJpZHMpO1xyXG4gICAgICAgICAgICAgICAgc2V0QXNrcyhzb3J0ZWRBc2tzKTtcclxuICAgICAgICAgICAgICAgIHNldExhc3RVcGRhdGUobmV3IERhdGUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTG9hZGluZykgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdzLmN1cnJlbnQub25lcnJvciA9IChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dmVudWV9XSBXZWJTb2NrZXQgRXJyb3I6YCwgZXJyKTtcclxuICAgICAgICAgICAgc2V0RXJyb3IoYEZhaWxlZCB0byBjb25uZWN0IHRvICR7dmVudWV9LiBDaGVjayB0aGUgYnJvd3NlciBjb25zb2xlIGZvciBkZXRhaWxzLmApO1xyXG4gICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YVRpbWVvdXQuY3VycmVudCkgY2xlYXJUaW1lb3V0KGRhdGFUaW1lb3V0LmN1cnJlbnQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdzLmN1cnJlbnQub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFske3ZlbnVlfV0gV2ViU29ja2V0IERpc2Nvbm5lY3RlZGApO1xyXG4gICAgICAgICAgICBpZiAoZGF0YVRpbWVvdXQuY3VycmVudCkgY2xlYXJUaW1lb3V0KGRhdGFUaW1lb3V0LmN1cnJlbnQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh3cy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB3cy5jdXJyZW50LmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGFUaW1lb3V0LmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChkYXRhVGltZW91dC5jdXJyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbdmVudWUsIHN5bWJvbF0pO1xyXG5cclxuICAgIHJldHVybiB7IGJpZHMsIGFza3MsIGlzTG9hZGluZywgZXJyb3IsIGxhc3RVcGRhdGUgfTtcclxufTtcclxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiVkVOVUVfQ09ORklHIiwidXNlT3JkZXJib29rIiwidmVudWUiLCJzeW1ib2wiLCJiaWRzIiwic2V0QmlkcyIsImFza3MiLCJzZXRBc2tzIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImxhc3RVcGRhdGUiLCJzZXRMYXN0VXBkYXRlIiwid3MiLCJkYXRhVGltZW91dCIsImN1cnJlbnQiLCJjbG9zZSIsImNsZWFyVGltZW91dCIsImNvbmZpZyIsImZvcm1hdHRlZFN5bWJvbCIsInN5bWJvbEZvcm1hdCIsIldlYlNvY2tldCIsIndzVXJsIiwibG9jYWxCaWRzIiwiTWFwIiwibG9jYWxBc2tzIiwib25vcGVuIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0U3Vic2NyaWJlTXNnIiwic2V0VGltZW91dCIsImxlbmd0aCIsIm9ubWVzc2FnZSIsImV2ZW50IiwiZGF0YSIsInBhcnNlIiwic3VjY2VzcyIsImluY2x1ZGVzIiwicmVzdWx0IiwibWV0aG9kIiwianNvbnJwYyIsInBhcmFtcyIsIm5ld09yZGVycyIsInByb2Nlc3NNZXNzYWdlIiwiaXNTbmFwc2hvdCIsImNsZWFyIiwidXBkYXRlT3JkZXJCb29rIiwiY3VycmVudEJvb2siLCJ1cGRhdGVzIiwiZm9yRWFjaCIsInByaWNlIiwic2l6ZSIsInByaWNlTnVtIiwicGFyc2VGbG9hdCIsInNpemVOdW0iLCJkZWxldGUiLCJzZXQiLCJzb3J0ZWRCaWRzIiwiQXJyYXkiLCJmcm9tIiwiZW50cmllcyIsInNvcnQiLCJhIiwiYiIsInNvcnRlZEFza3MiLCJEYXRlIiwib25lcnJvciIsImVyciIsIm9uY2xvc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/hooks/useOrderbook.js\n"));

/***/ })

});